language: java
jdk:
- openjdk8
addons:
  sonarcloud:
    organization: yurak
    token:
      secure: ${SONAR_TOKEN}
cache:
  directories:
  - "$HOME/.m2/repository"
  - "$HOME/.sonar/cache"
jobs:
  include:
  - stage: parent-pom
    before_script: cd $TRAVIS_BUILD_DIR/application/parent-pom
    script:
    - mvn clean install -DskipTests=true
  - stage: webapp-service
    before_script: cd $TRAVIS_BUILD_DIR/application/webapp-service
    script:
    - mvn clean install -DskipTests=true
  - stage: scheduled-quarkus
    before_script: cd $TRAVIS_BUILD_DIR/application/scheduled-quarkus
    script:
    - mvn clean verify sonar:sonar -DskipTests=true -Dsonar.projectKey=yurake_k8s-3tier-webapp
env:
  global:
    secure: QIWwrl1rToMAKYsNxNCsoDE/ziJVmk1GsVNwdHVo2Gk77eUaiubkdpPOKmk45vCRkZv+WbfUukSUlc0PXGeneSrSkIVkOoMmiGvMiY+iZfbfors4RIlL0pk6Z5CqjolYwx0+aLiPUFbG8CM3GjOUkICoAQ38nMmPiPNyYkjfpxCw/jX0adorPesIwBHBXWSiKFFFyEXv8OGWKUgy8kMWgUKwgP1D/KftJ0FxRj4vj5b5sTNTIzqMz23GRyB4fh0Etjlfhe0W98E1Dg8Tzw27mq/j2UI0K8SAhpR9m4XPQzWO2xvEd4aA8auH352p8sDhnoazY3dVSxmtyRwSanj0xct8YIYgi/cpoHJfOjA8CKYr7oYvEI9rjqjqizhwGozjXaytXqe0h04YBT4+PgvUdkiyCRxC7YfDT9zW0YHfDRH+flls5YK0/nSFyw+fSX10YEyldvPwaD2/CZ++x20id4vgBYMAOLgR6hU4/Sv40fP2njylS8JKD6MqFjjB/PWZacybJLDiexPQzxk4Xicx5QpNWTv2Jd7iNGlNe1jtsyCnMKbFSXEKrng7WN+gzLvJxh3S8Z3mAfRRd1Utbn17mGjUbUNeWdcpB1uOHiThrJOynmditah7GVW9ro03TAYpXwgdKITRHonQscZFebN7NOWdvS0Z9Y5Mwk3XtBsenFc=
